{% extends "base.html" %} {% block title %}Model Insights Â· Dental Cavity
Detection{% endblock %} {% block content %} {% set subtitles = { "Accuracy
Trend": "Training vs validation accuracy across epochs.", "Loss Trend": "Loss
curves that highlight overfitting or underfitting.", "F1 Score by Class":
"Balanced performance for each class (higher is better).", "Confusion Matrix":
"Where the model confuses classes and why." } %}

<section class="hero text-center">
  <p class="badge-soft text-uppercase">Training Insights</p>
  <h1 class="mb-3">See how the model learns</h1>
  <p class="mx-auto" style="max-width: 640px">
    Explore the latest training metrics, spot potential drift, and decide when
    to retrain. Each chart is generated automatically after running the training
    pipeline.
  </p>
  <div class="d-flex flex-wrap justify-content-center gap-3 mt-4">
    <a class="btn btn-gradient" href="{{ url_for('predict') }}"
      >Run a new prediction</a
    >
    <a class="btn btn-outline-light px-4" href="{{ url_for('home') }}"
      >Back to home</a
    >
  </div>
</section>

{% if missing_graphs %}
<div class="alert alert-warning card-glass border-0 text-start">
  <strong>Heads up:</strong> we could not find the following charts inside
  <code>static/</code>:
  <ul class="mb-1">
    {% for graph in missing_graphs %}
    <li>{{ graph }}</li>
    {% endfor %}
  </ul>
  <div class="small text-muted">
    Run <code>RESNET_50_TRAIN.py</code> or upload the exported plots to refresh
    these visuals.
  </div>
</div>
{% endif %}

<div class="row g-4">
  {% for card in graph_cards %}
  <div class="col-md-6 col-lg-4">
    <article class="card-glass graph-card p-4 h-100 d-flex flex-column gap-3">
      <div class="d-flex justify-content-between align-items-center">
        <span class="badge-soft text-uppercase small"
          >Chart {{ loop.index }}</span
        >
        {% if card.exists %}
        <span class="badge bg-success-subtle text-success">Ready</span>
        {% else %}
        <span class="badge bg-warning text-dark">Missing</span>
        {% endif %}
      </div>
      <div>
        <h5 class="fw-semibold mb-2">{{ card.title }}</h5>
        <p class="text-muted small mb-0">{{ subtitles[card.title] }}</p>
      </div>
      {% if card.exists %}
      <img
        src="{{ card.url }}"
        class="img-fluid"
        alt="{{ card.title }}"
        loading="lazy"
      />
      {% else %}
      <div
        class="upload-zone w-100 flex-grow-1 d-flex flex-column justify-content-center align-items-center text-center"
      >
        <p class="mb-2">Chart not generated yet.</p>
        <p class="small text-muted mb-0">
          Train the model to refresh this panel.
        </p>
      </div>
      {% endif %}
    </article>
  </div>
  {% endfor %}
</div>
{% endblock %}
